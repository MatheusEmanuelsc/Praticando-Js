<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Completo: Manipula√ß√£o de Formul√°rios no DOM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            margin-top: 20px;
            margin-bottom: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .index {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .index h2 {
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .index-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 10px;
            list-style: none;
        }

        .index-list li {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .index-list li:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .index-list a {
            color: white;
            text-decoration: none;
            font-weight: 500;
        }

        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #e74c3c;
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 10px;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .code-block::before {
            content: "JavaScript";
            position: absolute;
            top: 5px;
            right: 10px;
            background: #e74c3c;
            color: white;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 0.8em;
        }

        .html-block {
            background: #34495e;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            position: relative;
        }

        .html-block::before {
            content: "HTML";
            position: absolute;
            top: 5px;
            right: 10px;
            background: #e67e22;
            color: white;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 0.8em;
        }

        .comment {
            color: #95a5a6;
            font-style: italic;
        }

        .demo-area {
            background: #f8f9fa;
            border: 2px dashed #e74c3c;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .demo-form {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin: 20px 0;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2c3e50;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #e74c3c;
            box-shadow: 0 0 10px rgba(231, 76, 60, 0.2);
        }

        .checkbox-group,
        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 5px;
        }

        .checkbox-item,
        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .demo-button {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(231, 76, 60, 0.3);
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
        }

        .demo-button.secondary {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            box-shadow: 0 4px 15px rgba(116, 185, 255, 0.3);
        }

        .demo-button.secondary:hover {
            box-shadow: 0 6px 20px rgba(116, 185, 255, 0.4);
        }

        .highlight {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .tip {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #5f27cd;
        }

        .tip strong {
            display: block;
            margin-bottom: 5px;
        }

        .warning {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #e84393;
        }

        .success {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #00a085;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .comparison-table th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            font-weight: bold;
        }

        .comparison-table tr:hover {
            background: #f8f9fa;
        }

        .method-name {
            color: #e74c3c;
            font-weight: bold;
        }

        .property-name {
            color: #27ae60;
            font-weight: bold;
        }

        .output-area {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            min-height: 100px.embedding overflow-y: auto;
            max-height: 300px;
        }

        .error {
            border-color: #e74c3c !important;
            background-color: #fdf2f2 !important;
        }

        .valid {
            border-color: #27ae60 !important;
            background-color: #f2fdf7 !important;
        }

        .error-message {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }

            h1 {
                font-size: 2em;
            }

            .index-list {
                grid-template-columns: 1fr;
            }

            .checkbox-group,
            .radio-group {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üìã Guia Completo: Manipula√ß√£o de Formul√°rios no DOM</h1>

        <!-- √çNDICE -->
        <div class="index">
            <h2>üìã √çndice do Conte√∫do</h2>
            <ul class="index-list">
                <li><a href="#introducao">1. Introdu√ß√£o aos Formul√°rios</a></li>
                <li><a href="#selecionando-forms">2. Selecionando Formul√°rios</a></li>
                <li><a href="#recuperando-valores">3. Recuperando Valores</a></li>
                <li><a href="#definindo-valores">4. Definindo Valores</a></li>
                <li><a href="#eventos-formulario">5. Eventos de Formul√°rio</a></li>
                <li><a href="#validacao">6. Valida√ß√£o de Dados</a></li>
                <li><a href="#formdata-api">7. FormData API</a></li>
                <li><a href="#exemplos-praticos">8. Exemplos Pr√°ticos</a></li>
                <li><a href="#boas-praticas">9. Boas Pr√°ticas</a></li>
                <li><a href="#conclusao">10. Conclus√£o</a></li>
            </ul>
        </div>

        <!-- SE√á√ÉO 1: INTRODU√á√ÉO -->
        <div class="section" id="introducao">
            <h2>1. üåü Introdu√ß√£o aos Formul√°rios</h2>
            <p>Os <span class="highlight">formul√°rios HTML</span> s√£o elementos fundamentais para intera√ß√£o com
                usu√°rios. JavaScript permite manipular todos os aspectos dos formul√°rios: recuperar valores, validar
                dados, enviar informa√ß√µes e muito mais.</p>

            <div class="html-block">
                <form id="meuFormulario" action="/enviar" method="POST">
                    <input type="text" name="nome" id="nome" placeholder="Seu nome">
                    <input type="email" name="email" id="email" placeholder="Seu e-mail">
                    <select name="cidade" id="cidade">
                        <option value="">Selecione uma cidade</option>
                        <option value="sp">S√£o Paulo</option>
                        <option value="rj">Rio de Janeiro</option>
                    </select>
                    <textarea name="mensagem" id="mensagem"></textarea>
                    <button type="submit">Enviar</button>
                </form>
            </div>

            <div class="tip">
                <strong>üí° Dica:</strong>
                Sempre use os atributos 'name' e 'id' nos campos do formul√°rio para facilitar a manipula√ß√£o via
                JavaScript!
            </div>
        </div>

        <!-- SE√á√ÉO 2: SELECIONANDO FORMUL√ÅRIOS -->
        <div class="section" id="selecionando-forms">
            <h2>2. üéØ Selecionando Formul√°rios e Campos</h2>
            <p>Existem v√°rias maneiras de selecionar formul√°rios e seus campos no DOM.</p>

            <div class="code-block">
                // 1. Selecionando o formul√°rio
                const form = document.getElementById('meuFormulario');
                const formByName = document.forms['meuFormulario']; // Usando document.forms
                const formByQuery = document.querySelector('form');

                // 2. Selecionando campos individuais
                const nomeInput = document.getElementById('nome');
                const emailInput = form.querySelector('#email'); // Dentro do formul√°rio
                const cidadeSelect = form.elements['cidade']; // Usando form.elements

                // 3. Selecionando m√∫ltiplos campos
                const todosInputs = form.querySelectorAll('input');
                const camposObrigatorios = form.querySelectorAll('[required]');
                const checkboxes = form.querySelectorAll('input[type="checkbox"]');
                const radios = form.querySelectorAll('input[type="radio"]');

                // 4. Usando a cole√ß√£o elements do formul√°rio
                console.log('Todos os elementos do form:', form.elements);
                console.log('Campo nome:', form.elements.nome);
                console.log('Campo email:', form.elements.email);

                // 5. Selecionando por tipo de campo
                const inputsTexto = form.querySelectorAll('input[type="text"]');
                const selects = form.querySelectorAll('select');
                const textareas = form.querySelectorAll('textarea');
                const botoes = form.querySelectorAll('button, input[type="submit"]');
            </div>

            <div class="tip">
                <strong>‚ö° Performance:</strong>
                Use form.elements para acessar campos por nome - √© mais r√°pido que querySelector!
            </div>
        </div>

        <!-- SE√á√ÉO 3: RECUPERANDO VALORES -->
        <div class="section" id="recuperando-valores">
            <h2>3. üì§ Recuperando Valores dos Campos</h2>
            <p>Cada tipo de campo tem sua pr√≥pria forma de recuperar valores.</p>

            <div class="code-block">
                // 1. Input text, email, password, etc.
                const nome = document.getElementById('nome').value;
                const email = document.getElementById('email').value;

                // 2. Select (dropdown)
                const cidadeSelect = document.getElementById('cidade');
                const cidadeValor = cidadeSelect.value; // Valor da op√ß√£o selecionada
                const cidadeTexto = cidadeSelect.options[cidadeSelect.selectedIndex].text; // Texto da op√ß√£o

                // 3. Multiple select
                const selectMultiplo = document.getElementById('interesses');
                const valoresSelecionados = Array.from(selectMultiplo.selectedOptions)
                .map(option => option.value);

                // 4. Textarea
                const mensagem = document.getElementById('mensagem').value;

                // 5. Checkbox
                const checkbox = document.getElementById('aceito-termos');
                const aceitouTermos = checkbox.checked; // true ou false

                // 6. Radio buttons (mesmo name)
                const generoRadios = document.querySelectorAll('input[name="genero"]');
                let generoSelecionado = '';
                generoRadios.forEach(radio => {
                if (radio.checked) {
                generoSelecionado = radio.value;
                }
                });

                // Ou de forma mais concisa:
                const genero = document.querySelector('input[name="genero"]:checked')?.value || '';

                // 7. M√∫ltiplos checkboxes (mesmo name)
                const hobbiesCheckboxes = document.querySelectorAll('input[name="hobbies"]:checked');
                const hobbiesSelecionados = Array.from(hobbiesCheckboxes).map(cb => cb.value);

                // 8. Input number, range, date
                const idade = document.getElementById('idade').value; // String
                const idadeNumero = parseInt(document.getElementById('idade').value); // N√∫mero
                const dataNascimento = document.getElementById('data-nascimento').value; // YYYY-MM-DD

                // 9. Input file
                const arquivos = document.getElementById('arquivo').files;
                if (arquivos.length > 0) {
                console.log('Primeiro arquivo:', arquivos[0].name);
                console.log('Tamanho:', arquivos[0].size);
                console.log('Tipo:', arquivos[0].type);
                }
            </div>

            <div class="warning">
                <strong>‚ö†Ô∏è Aten√ß√£o:</strong>
                Sempre valide se o elemento existe antes de acessar suas propriedades para evitar erros!
            </div>
        </div>

        <!-- SE√á√ÉO 4: DEFININDO VALORES -->
        <div class="section" id="definindo-valores">
            <h2>4. üì• Definindo Valores nos Campos</h2>
            <p>Al√©m de recuperar, tamb√©m √© poss√≠vel definir valores programaticamente nos campos.</p>

            <div class="code-block">
                // 1. Input text, email, password, etc.
                document.getElementById('nome').value = 'Jo√£o Silva';
                document.getElementById('email').value = 'joao@email.com';

                // 2. Select (dropdown)
                const cidadeSelect = document.getElementById('cidade');
                cidadeSelect.value = 'sp'; // Por valor
                cidadeSelect.selectedIndex = 1; // Por √≠ndice

                // 3. Textarea
                document.getElementById('mensagem').value = 'Mensagem pr√©-definida';

                // 4. Checkbox
                document.getElementById('aceito-termos').checked = true;
                document.getElementById('newsletter').checked = false;

                // 5. Radio buttons
                const radioMasculino = document.querySelector('input[name="genero"][value="masculino"]');
                if (radioMasculino) {
                radioMasculino.checked = true;
                }

                // 6. M√∫ltiplos checkboxes
                const hobbiesParaSelecionar = ['leitura', 'esportes'];
                hobbiesParaSelecionar.forEach(hobby => {
                const checkbox = document.querySelector(`input[name="hobbies"][value="${hobby}"]`);
                if (checkbox) {
                checkbox.checked = true;
                }
                });

                // 7. Input number, range, date
                document.getElementById('idade').value = '25';
                document.getElementById('data-nascimento').value = '1998-05-15';
                document.getElementById('prioridade').value = '7'; // Range input

                // 8. Limpar todos os campos do formul√°rio
                function limparFormulario(form) {
                const inputs = form.querySelectorAll('input, select, textarea');
                inputs.forEach(input => {
                switch (input.type) {
                case 'text':
                case 'email':
                case 'password':
                case 'number':
                case 'date':
                case 'tel':
                input.value = '';
                break;
                case 'checkbox':
                case 'radio':
                input.checked = false;
                break;
                case 'select-one':
                case 'select-multiple':
                input.selectedIndex = -1;
                break;
                default:
                if (input.tagName === 'TEXTAREA') {
                input.value = '';
                }
                }
                });
                }

                // 9. Preencher formul√°rio com dados de um objeto
                function preencherFormulario(form, dados) {
                Object.keys(dados).forEach(campo => {
                const elemento = form.elements[campo];
                if (elemento) {
                if (elemento.type === 'checkbox') {
                elemento.checked = dados[campo];
                } else if (elemento.type === 'radio') {
                const radio = form.querySelector(`input[name="${campo}"][value="${dados[campo]}"]`);
                if (radio) radio.checked = true;
                } else {
                elemento.value = dados[campo];
                }
                }
                });
                }

                // Exemplo de uso
                const dadosUsuario = {
                nome: 'Maria Santos',
                email: 'maria@email.com',
                cidade: 'rj',
                aceito_termos: true
                };
                preencherFormulario(form, dadosUsuario);
            </div>
        </div>

        <!-- SE√á√ÉO 5: EVENTOS DE FORMUL√ÅRIO -->
        <div class="section" id="eventos-formulario">
            <h2>5. ‚ö° Eventos de Formul√°rio</h2>
            <p>Os formul√°rios disparam diversos eventos que permitem interagir com as a√ß√µes do usu√°rio.</p>

            <div class="code-block">
                // 1. Evento submit - quando o formul√°rio √© enviado
                form.addEventListener('submit', function(event) {
                event.preventDefault(); // Impede envio padr√£o

                console.log('Formul√°rio enviado!');

                // Validar dados antes do envio
                if (validarFormulario()) {
                // Enviar dados via AJAX ou permitir envio
                enviarDados();
                }
                });

                // 2. Evento change - quando valor do campo muda
                document.getElementById('cidade').addEventListener('change', function(event) {
                console.log('Cidade selecionada:', event.target.value);

                // Carregar dados baseados na sele√ß√£o
                if (event.target.value === 'sp') {
                carregarBairrosSaoPaulo();
                }
                });

                // 3. Evento input - enquanto usu√°rio digita (tempo real)
                document.getElementById('nome').addEventListener('input', function(event) {
                const valor = event.target.value;
                console.log('Usu√°rio est√° digitando:', valor);

                // Valida√ß√£o em tempo real
                if (valor.length < 2) { event.target.classList.add('error'); } else {
                    event.target.classList.remove('error'); } }); // 4. Evento focus e blur const
                    emailInput=document.getElementById('email'); emailInput.addEventListener('focus', function(event) {
                    console.log('Campo email recebeu foco'); event.target.style.borderColor='#3498db' ; });
                    emailInput.addEventListener('blur', function(event) { console.log('Campo email perdeu foco'); //
                    Validar email quando sair do campo if (!validarEmail(event.target.value)) {
                    event.target.classList.add('error'); exibirErro('Email inv√°lido', event.target); } else {
                    event.target.classList.remove('error'); } }); // 5. Evento reset - quando formul√°rio √© resetado
                    form.addEventListener('reset', function(event) { console.log('Formul√°rio foi resetado'); // Limpar
                    mensagens de erro const erros=form.querySelectorAll('.error-message'); erros.forEach(erro=>
                    erro.remove());
                    });

                    // 6. Delega√ß√£o de eventos para campos din√¢micos
                    form.addEventListener('click', function(event) {
                    if (event.target.matches('.btn-remover-campo')) {
                    event.target.closest('.campo-dinamico').remove();
                    }

                    if (event.target.matches('.btn-adicionar-campo')) {
                    adicionarCampoDinamico();
                    }
                    });

                    // 7. Evento personalizado para valida√ß√£o
                    function criarEventoValidacao(campo, valido, mensagem) {
                    const evento = new CustomEvent('validacao', {
                    detail: { valido, mensagem, campo }
                    });
                    campo.dispatchEvent(evento);
                    }

                    // Ouvir evento personalizado
                    form.addEventListener('validacao', function(event) {
                    const { valido, mensagem, campo } = event.detail;

                    if (valido) {
                    campo.classList.add('valid');
                    campo.classList.remove('error');
                    } else {
                    campo.classList.add('error');
                    campo.classList.remove('valid');
                    exibirErro(mensagem, campo);
                    }
                    });
            </div>

            <div class="tip">
                <strong>üöÄ Dica:</strong>
                Use event.preventDefault() no evento submit para controlar completamente o envio do formul√°rio!
            </div>
        </div>

        <!-- SE√á√ÉO 6: VALIDA√á√ÉO -->
        <div class="section" id="validacao">
            <h2>6. ‚úÖ Valida√ß√£o de Dados</h2>
            <p>A valida√ß√£o √© essencial para garantir a qualidade dos dados antes do envio.</p>

            <div class="code-block">
                // 1. Valida√ß√µes b√°sicas
                function validarEmail(email) {
                const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return regex.test(email);
                }

                function validarTelefone(telefone) {
                const regex = /^[\(\)\d\s\-\+]+$/;
                return telefone.length >= 10 && regex.test(telefone);
                }

                function validarCPF(cpf) {
                cpf = cpf.replace(/[^\d]/g, '');

                if (cpf.length !== 11) return false;
                if (/^(\d)\1{10}$/.test(cpf)) return false;

                // Valida√ß√£o dos d√≠gitos verificadores
                let soma = 0;
                for (let i = 0; i < 9; i++) { soma +=parseInt(cpf.charAt(i)) * (10 - i); } let resto=11 - (soma % 11);
                    if (resto===10 || resto===11) resto=0; if (resto !==parseInt(cpf.charAt(9))) return false; soma=0;
                    for (let i=0; i < 10; i++) { soma +=parseInt(cpf.charAt(i)) * (11 - i); } resto=11 - (soma % 11); if
                    (resto===10 || resto===11) resto=0; return resto===parseInt(cpf.charAt(10)); } function
                    validarIdade(idade) { const idadeNum=parseInt(idade); return idadeNum>= 0 && idadeNum <= 120; }
                        function validarSenha(senha) { // M√≠nimo 8 caracteres, 1 mai√∫scula, 1 min√∫scula, 1 n√∫mero const
                        regex=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d@$!%*?&]{8,}$/; return regex.test(senha); } // 2.
                        Sistema de valida√ß√£o completo class ValidadorFormulario { constructor(form) { this.form=form;
                        this.regras=new Map(); this.erros=new Map(); } adicionarRegra(campo, validador, mensagem) { if
                        (!this.regras.has(campo)) { this.regras.set(campo, []); } this.regras.get(campo).push({
                        validador, mensagem }); return this; } validarCampo(nomeCampo) { const
                        campo=this.form.elements[nomeCampo]; if (!campo) return true; const
                        regras=this.regras.get(nomeCampo) || []; this.erros.delete(nomeCampo); for (const regra of
                        regras) { if (!regra.validador(campo.value, campo)) { this.erros.set(nomeCampo, regra.mensagem);
                        this.exibirErro(campo, regra.mensagem); return false; } } this.removerErro(campo); return true;
                        } validarTodos() { let todosValidos=true; for (const [nomeCampo] of this.regras) { if
                        (!this.validarCampo(nomeCampo)) { todosValidos=false; } } return todosValidos; }
                        exibirErro(campo, mensagem) { this.removerErro(campo); campo.classList.add('error'); const
                        divErro=document.createElement('div'); divErro.className='error-message' ;
                        divErro.textContent=mensagem; divErro.style.color='#e74c3c' ; divErro.style.fontSize='14px' ;
                        divErro.style.marginTop='5px' ; campo.parentNode.appendChild(divErro); } removerErro(campo) {
                        campo.classList.remove('error'); campo.classList.add('valid'); const
                        erroExistente=campo.parentNode.querySelector('.error-message'); if (erroExistente) {
                        erroExistente.remove(); } } obterErros() { return Array.from(this.erros.entries()); } } // 3.
                        Uso do validador const form=document.getElementById('meuFormulario'); const validador=new
                        ValidadorFormulario(form); validador .adicionarRegra('nome', valor=> valor.length >= 2, 'Nome
                        deve ter pelo menos 2 caracteres')
                        .adicionarRegra('nome', valor => /^[a-zA-Z√Ä-√ø\s]+$/.test(valor), 'Nome deve conter apenas
                        letras')
                        .adicionarRegra('email', valor => validarEmail(valor), 'Email deve ter formato v√°lido')
                        .adicionarRegra('mensagem', valor => valor.length >= 10, 'Mensagem deve ter pelo menos 10
                        caracteres');

                        // 4. Valida√ß√£o em tempo real
                        ['nome', 'email', 'mensagem'].forEach(campo => {
                        const elemento = form.elements[campo];
                        if (elemento) {
                        elemento.addEventListener('blur', () => {
                        validador.validarCampo(campo);
                        });
                        }
                        });

                        // 5. Valida√ß√£o no envio
                        form.addEventListener('submit', function(event) {
                        event.preventDefault();

                        if (validador.validarTodos()) {
                        console.log('Formul√°rio v√°lido! Enviando...');
                        // Processar envio
                        } else {
                        console.log('Erros encontrados:', validador.obterErros());
                        // Focar no primeiro campo com erro
                        const primeiroErro = validador.obterErros()[0];
                        if (primeiroErro) {
                        form.elements[primeiroErro[0]].focus();
                        }
                        }
                        });
            </div>

            <div class="demo-area">
                <h3>Exemplo de Valida√ß√£o</h3>
                <div class="demo-form">
                    <div class="form-group">
                        <label for="demo-email">Email:</label>
                        <input type="email" id="demo-email" name="email" required placeholder="Digite seu email">
                    </div>
                    <button type="button" class="demo-button" onclick="validador.validarCampo('email')">Validar</button>
                </div>
            </div>

            <div class="success">
                <strong>‚úÖ Sucesso:</strong>
                Combine valida√ß√µes HTML5 com JavaScript para uma experi√™ncia robusta e acess√≠vel!
            </div>
        </div>

        <!-- SE√á√ÉO 7: FORMDATA API -->
        <div class="section" id="formdata-api">
            <h2>7. üìä FormData API</h2>
            <p>A <span class="highlight">FormData API</span> facilita a coleta e envio de dados de formul√°rios,
                especialmente √∫til para AJAX e upload de arquivos.</p>

            <div class="code-block">
                // 1. Criando FormData a partir de um formul√°rio
                const form = document.getElementById('meuFormulario');
                const formData = new FormData(form);

                // 2. Criando FormData manualmente
                const dadosManual = new FormData();
                dadosManual.append('nome', 'Jo√£o Silva');
                dadosManual.append('email', 'joao@email.com');
                dadosManual.append('idade', '30');

                // 3. Adicionando arquivos
                const arquivoInput = document.getElementById('arquivo');
                if (arquivoInput?.files.length > 0) {
                formData.append('arquivo', arquivoInput.files[0]);
                }

                // 4. M√©todos do FormData
                formData.append('novoCampo', 'valor'); // Adicionar
                formData.set('campoExistente', 'novoValor'); // Definir (substitui)
                formData.delete('campoParaRemover'); // Remover

                console.log('Tem nome?', formData.has('nome')); // Verificar exist√™ncia
                console.log('Valor nome:', formData.get('nome')); // Obter valor
                console.log('Todos os emails:', formData.getAll('email')); // Obter todos (arrays)

                // 5. Iterando sobre FormData
                console.log('=== Iterando sobre FormData ===');
                for (const [chave, valor] of formData) {
                console.log(`${chave}: ${valor}`);
                }

                // Usando forEach
                formData.forEach((valor, chave) => {
                console.log(`${chave}: ${valor}`);
                });

                // 6. Convertendo FormData para objeto
                function formDataParaObjeto(formData) {
                const objeto = {};
                for (const [chave, valor] of formData) {
                if (objeto[chave]) {
                // Se j√° existe, transformar em array
                if (Array.isArray(objeto[chave])) {
                objeto[chave].push(valor);
                } else {
                objeto[chave] = [objeto[chave], valor];
                }
                } else {
                objeto[chave] = valor;
                }
                }
                return objeto;
                }

                // 7. Convertendo objeto para FormData
                function objetoParaFormData(objeto) {
                const formData = new FormData();

                Object.keys(objeto).forEach(chave => {
                const valor = objeto[chave];

                if (Array.isArray(valor)) {
                valor.forEach(item => formData.append(chave, item));
                } else if (valor instanceof File) {
                formData.append(chave, valor);
                } else {
                formData.append(chave, String(valor));
                }
                });

                return formData;
                }

                // 8. Enviando via fetch
                async function enviarFormulario(form) {
                const formData = new FormData(form);

                try {
                const response = await fetch('/api/enviar', {
                method: 'POST',
                body: formData // N√£o definir Content-Type, o browser faz automaticamente
                });

                if (response.ok) {
                const resultado = await response.json();
                console.log('Sucesso:', resultado);
                } else {
                console.error('Erro no servidor:', response.status);
                }
                } catch (error) {
                console.error('Erro na requisi√ß√£o:', error);
                }
                }

                // 9. Upload de m√∫ltiplos arquivos
                function adicionarMultiplosArquivos(formData, inputFiles, nomeCampo) {
                for (let i = 0; i < inputFiles.files.length; i++) { formData.append(`${nomeCampo}[]`,
                    inputFiles.files[i]); } } // 10. Exemplo completo de envio form.addEventListener('submit', async
                    function(event) { event.preventDefault(); // Validar primeiro if (!validador.validarTodos()) {
                    console.log('Formul√°rio inv√°lido'); return; } // Criar FormData const formData=new FormData(this);
                    // Adicionar dados extras se necess√°rio formData.append('timestamp', Date.now());
                    formData.append('userAgent', navigator.userAgent); // Enviar await enviarFormulario(this); });
                    </div>

                    <div class="success">
                        <strong>‚úÖ Vantagem do FormData:</strong>
                        Automaticamente codifica dados para multipart/form-data, ideal para uploads!
                    </div>
            </div>

            <!-- SE√á√ÉO 8: EXEMPLOS PR√ÅTICOS -->
            <div class="section" id="exemplos-praticos">
                <h2>8. üõ†Ô∏è Exemplos Pr√°ticos</h2>
                <p>Vamos ver exemplos completos de situa√ß√µes reais de uso.</p>

                <div class="demo-area">
                    <h3>üìù Exemplo 1: Formul√°rio de Contato Din√¢mico</h3>
                    <div class="demo-form">
                        <form id="formContato">
                            <div class="form-group">
                                <label for="nomeContato">Nome Completo *</label>
                                <input type="text" id="nomeContato" name="nome" required>
                            </div>

                            <div class="form-group">
                                <label for="emailContato">E-mail *</label>
                                <input type="email" id="emailContato" name="email" required>
                            </div>

                            <div class="form-group">
                                <label for="telefoneContato">Telefone</label>
                                <input type="tel" id="telefoneContato" name="telefone">
                            </div>

                            <div class="form-group">
                                <label for="assuntoContato">Assunto</label>
                                <select id="assuntoContato" name="assunto">
                                    <option value="">Selecione um assunto</option>
                                    <option value="duvida">D√∫vida</option>
                                    <option value="sugestao">Sugest√£o</option>
                                    <option value="reclamacao">Reclama√ß√£o</option>
                                    <option value="elogio">Elogio</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="mensagemContato">Mensagem *</label>
                                <textarea id="mensagemContato" name="mensagem" rows="4" required></textarea>
                            </div>

                            <div class="form-group">
                                <div class="checkbox-item">
                                    <input type="checkbox" id="copiaEmail" name="copia_email">
                                    <label for="copiaEmail">Receber c√≥pia por e-mail</label>
                                </div>
                            </div>

                            <button type="submit" class="demo-button">Enviar Mensagem</button>
                            <button type="reset" class="demo-button secondary">Limpar</button>
                        </form>
                    </div>

                    <div class="output-area" id="outputContato">
                        Aguardando preenchimento do formul√°rio...
                    </div>
                </div>

                <div class="code-block">
                    // Exemplo 1: Sistema completo de formul√°rio de contato
                    class FormularioContato {
                    constructor(formId) {
                    this.form = document.getElementById(formId);
                    this.output = document.getElementById('outputContato');
                    this.configurarEventos();
                    this.configurarValidacao();
                    }

                    configurarEventos() {
                    // Submit do formul√°rio
                    this.form.addEventListener('submit', (e) => this.enviarFormulario(e));

                    // Reset do formul√°rio
                    this.form.addEventListener('reset', () => {
                    setTimeout(() => this.atualizarOutput('Formul√°rio limpo!'), 50);
                    });

                    // Valida√ß√£o em tempo real
                    this.form.addEventListener('input', (e) => this.validarCampoRealTime(e));
                    this.form.addEventListener('change', (e) => this.validarCampoRealTime(e));
                    }

                    configurarValidacao() {
                    this.validador = new ValidadorFormulario(this.form);

                    this.validador
                    .adicionarRegra('nome', valor => valor.trim().length >= 2, 'Nome deve ter pelo menos 2 caracteres')
                    .adicionarRegra('email', valor => this.validarEmail(valor), 'E-mail deve ter formato v√°lido')
                    .adicionarRegra('telefone', valor => valor === '' || this.validarTelefone(valor), 'Telefone deve ter
                    formato v√°lido')
                    .adicionarRegra('mensagem', valor => valor.trim().length >= 10, 'Mensagem deve ter pelo menos 10
                    caracteres');
                    }

                    validarEmail(email) {
                    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
                    }

                    validarTelefone(telefone) {
                    const limpo = telefone.replace(/\D/g, '');
                    return limpo.length >= 10 && limpo.length <= 11; } validarCampoRealTime(event) { const
                        campo=event.target; if (campo.name) { setTimeout(()=> {
                        this.validador.validarCampo(campo.name);
                        this.mostrarResumoFormulario();
                        }, 300);
                        }
                        }

                        async enviarFormulario(event) {
                        event.preventDefault();

                        if (!this.validador.validarTodos()) {
                        this.atualizarOutput('‚ùå Formul√°rio cont√©m erros. Verifique os campos destacados.');
                        return;
                        }

                        const dados = this.coletarDados();
                        this.atualizarOutput('üì§ Enviando mensagem...');

                        // Simular envio (substitua por chamada real √† API)
                        try {
                        await this.simularEnvio(dados);
                        this.atualizarOutput(`‚úÖ Mensagem enviada com sucesso!\n\nResumo:\n${JSON.stringify(dados, null,
                        2)}`);
                        this.form.reset();
                        } catch (error) {
                        this.atualizarOutput(`‚ùå Erro ao enviar: ${error.message}`);
                        }
                        }

                        coletarDados() {
                        const formData = new FormData(this.form);
                        const dados = {};

                        for (const [chave, valor] of formData) {
                        dados[chave] = valor;
                        }

                        // Adicionar timestamp
                        dados.timestamp = new Date().toISOString();

                        return dados;
                        }

                        simularEnvio(dados) {
                        return new Promise((resolve, reject) => {
                        setTimeout(() => {
                        // Simular erro ocasional (10% de chance)
                        if (Math.random() < 0.1) { reject(new Error('Falha na conex√£o')); } else { resolve({ id:
                            Date.now(), status: 'enviado' }); } }, 2000); }); } mostrarResumoFormulario() { const
                            dados=this.coletarDados(); let resumo='üìã Dados atuais do formul√°rio:\n\n' ;
                            Object.entries(dados).forEach(([chave, valor])=> {
                            if (chave !== 'timestamp' && valor) {
                            resumo += `${chave}: ${valor}\n`;
                            }
                            });

                            this.atualizarOutput(resumo || 'Formul√°rio vazio...');
                            }

                            atualizarOutput(texto) {
                            this.output.textContent = texto;
                            }
                            }

                            // Inicializar o formul√°rio de contato
                            const formContato = new FormularioContato('formContato');
                </div>

                <div class="demo-area">
                    <h3>üõí Exemplo 2: Carrinho de Compras Din√¢mico</h3>
                    <div class="demo-form">
                        <div id="carrinhoContainer">
                            <h4>Produtos no Carrinho</h4>
                            <div id="itensCarrinho"></div>
                            <button type="button" class="demo-button" onclick="carrinho.adicionarItem()">+ Adicionar
                                Item</button>
                            <div style="margin-top: 20px;">
                                <strong>Total: R$ <span id="totalCarrinho">0,00</span></strong>
                            </div>
                        </div>
                    </div>

                    <div class="output-area" id="outputCarrinho">
                        Carrinho vazio
                    </div>
                </div>

                <div class="code-block">
                    // Exemplo 2: Sistema de carrinho de compras din√¢mico
                    class CarrinhoCompras {
                    constructor() {
                    this.itens = [];
                    this.container = document.getElementById('itensCarrinho');
                    this.totalElement = document.getElementById('totalCarrinho');
                    this.output = document.getElementById('outputCarrinho');
                    this.produtos = [
                    { id: 1, nome: 'Notebook', preco: 2500.00 },
                    { id: 2, nome: 'Mouse', preco: 50.00 },
                    { id: 3, nome: 'Teclado', preco: 150.00 },
                    { id: 4, nome: 'Monitor', preco: 800.00 },
                    { id: 5, nome: 'Headset', preco: 200.00 }
                    ];

                    this.atualizarDisplay();
                    }

                    adicionarItem() {
                    const itemId = Date.now();
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'form-group';
                    itemDiv.style.border = '1px solid #ddd';
                    itemDiv.style.padding = '15px';
                    itemDiv.style.marginBottom = '10px';
                    itemDiv.style.borderRadius = '8px';
                    itemDiv.dataset.itemId = itemId;

                    itemDiv.innerHTML = `
                    <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                        <select name="produto_${itemId}" style="flex: 1; min-width: 150px;"
                            onchange="carrinho.atualizarItem(${itemId})">
                            <option value="">Selecione um produto</option>
                            ${this.produtos.map(p => `<option value="${p.id}" data-preco="${p.preco}">${p.nome} - R$
                                ${p.preco.toFixed(2)}</option>`).join('')}
                        </select>
                        <input type="number" name="quantidade_${itemId}" min="1" value="1" style="width: 80px;"
                            onchange="carrinho.atualizarItem(${itemId})" placeholder="Qtd">
                        <span class="preco-item" style="font-weight: bold; min-width: 100px;">R$ 0,00</span>
                        <button type="button" onclick="carrinho.removerItem(${itemId})"
                            style="background: #e74c3c; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer;">‚ùå</button>
                    </div>
                    `;

                    this.container.appendChild(itemDiv);
                    this.itens.push({ id: itemId, produtoId: null, quantidade: 1, preco: 0 });
                    this.atualizarDisplay();
                    }

                    removerItem(itemId) {
                    const itemDiv = document.querySelector(`[data-item-id="${itemId}"]`);
                    if (itemDiv) {
                    itemDiv.remove();
                    this.itens = this.itens.filter(item => item.id !== itemId);
                    this.atualizarDisplay();
                    }
                    }

                    atualizarItem(itemId) {
                    const itemDiv = document.querySelector(`[data-item-id="${itemId}"]`);
                    const selectProduto = itemDiv.querySelector(`select[name="produto_${itemId}"]`);
                    const inputQuantidade = itemDiv.querySelector(`input[name="quantidade_${itemId}"]`);
                    const spanPreco = itemDiv.querySelector('.preco-item');

                    const produtoId = parseInt(selectProduto.value);
                    const quantidade = parseInt(inputQuantidade.value) || 1;

                    let precoUnitario = 0;
                    if (produtoId) {
                    const produto = this.produtos.find(p => p.id === produtoId);
                    precoUnitario = produto ? produto.preco : 0;
                    }

                    const precoTotal = precoUnitario * quantidade;
                    spanPreco.textContent = `R$ ${precoTotal.toFixed(2)}`;

                    // Atualizar no array
                    const item = this.itens.find(i => i.id === itemId);
                    if (item) {
                    item.produtoId = produtoId;
                    item.quantidade = quantidade;
                    item.preco = precoTotal;
                    }

                    this.atualizarDisplay();
                    }

                    calcularTotal() {
                    return this.itens.reduce((total, item) => total + (item.preco || 0), 0);
                    }

                    atualizarDisplay() {
                    const total = this.calcularTotal();
                    this.totalElement.textContent = total.toFixed(2);

                    // Atualizar output
                    if (this.itens.length === 0) {
                    this.output.textContent = 'Carrinho vazio';
                    } else {
                    let resumo = 'üõí Itens no carrinho:\n\n';
                    this.itens.forEach(item => {
                    if (item.produtoId) {
                    const produto = this.produtos.find(p => p.id === item.produtoId);
                    resumo += `${produto.nome} x${item.quantidade} = R$ ${item.preco.toFixed(2)}\n`;
                    }
                    });
                    resumo += `\nüí∞ Total: R$ ${total.toFixed(2)}`;
                    this.output.textContent = resumo;
                    }
                    }

                    obterDadosCarrinho() {
                    return {
                    itens: this.itens.filter(item => item.produtoId),
                    total: this.calcularTotal(),
                    timestamp: new Date().toISOString()
                    };
                    }
                    }

                    // Inicializar carrinho
                    const carrinho = new CarrinhoCompras();

                    // Fun√ß√£o global para adicionar item (chamada pelo bot√£o)
                    function adicionarItem() {
                    carrinho.adicionarItem();
                    }
                </div>
            </div>

            <!-- SE√á√ÉO 9: BOAS PR√ÅTICAS -->
            <div class="section" id="boas-praticas">
                <h2>9. üéØ Boas Pr√°ticas</h2>
                <p>Dicas importantes para escrever c√≥digo de qualidade na manipula√ß√£o de formul√°rios.</p>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>‚ùå Evite</th>
                            <th>‚úÖ Prefira</th>
                            <th>üí° Por qu√™?</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>document.form1.campo1.value</td>
                            <td>document.getElementById('campo1').value</td>
                            <td>Mais expl√≠cito e menos propenso a erros</td>
                        </tr>
                        <tr>
                            <td>onclick="validar()" no HTML</td>
                            <td>addEventListener('click', validar)</td>
                            <td>Separa√ß√£o entre HTML e JavaScript</td>
                        </tr>
                        <tr>
                            <td>Validar apenas no envio</td>
                            <td>Valida√ß√£o em tempo real</td>
                            <td>Melhor experi√™ncia do usu√°rio</td>
                        </tr>
                        <tr>
                            <td>alert() para mostrar erros</td>
                            <td>Mensagens inline ou toast</td>
                            <td>Interface mais moderna e acess√≠vel</td>
                        </tr>
                        <tr>
                            <td>Envio s√≠ncrono (submit padr√£o)</td>
                            <td>AJAX com fetch/axios</td>
                            <td>N√£o recarrega a p√°gina, melhor UX</td>
                        </tr>
                    </tbody>
                </table>

                <div class="code-block">
                    // 1. Sempre verificar se elementos existem
                    const campo = document.getElementById('meuCampo');
                    if (campo) {
                    campo.value = 'novo valor';
                    } else {
                    console.warn('Campo n√£o encontrado');
                    }

                    // 2. Usar optional chaining (ES2020)
                    const valor = document.getElementById('campo')?.value || '';

                    // 3. Debounce para valida√ß√£o em tempo real
                    function debounce(func, delay) {
                    let timeoutId;
                    return function (...args) {
                    clearTimeout(timeoutId);
                    timeoutId = setTimeout(() => func.apply(this, args), delay);
                    };
                    }

                    const validarComDebounce = debounce((campo) => {
                    validador.validarCampo(campo.name);
                    }, 300);

                    // 4. Sanitiza√ß√£o de dados
                    function sanitizarTexto(texto) {
                    return texto
                    .trim()
                    .replace(/[<>]/g, '') // Remove tags HTML
                        .replace(/&/g, '&amp;') // Escapa & para HTML
                        .replace(/"/g, '&quot;') // Escapa " para HTML
                        .replace(/'/g, '&#39;'); // Escapa ' para HTML
                        }

                        // 5. Estrutura modular
                        const FormularioUtils = {
                        limparErros(form) {
                        const erros = form.querySelectorAll('.error-message');
                        erros.forEach(erro => erro.remove());
                        const camposErro = form.querySelectorAll('.error');
                        camposErro.forEach(campo => campo.classList.remove('error'));
                        },

                        exibirErro(campo, mensagem) {
                        FormularioUtils.limparErros(campo.form);
                        campo.classList.add('error');
                        const divErro = document.createElement('div');
                        divErro.className = 'error-message';
                        divErro.textContent = mensagem;
                        campo.parentNode.appendChild(divErro);
                        }
                        };
                </div>

                <div class="tip">
                    <strong>üí° Dica:</strong>
                    Sempre valide os dados no lado do servidor, mesmo com valida√ß√£o robusta no cliente!
                </div>
            </div>

            <!-- SE√á√ÉO 10: CONCLUS√ÉO -->
            <div class="section" id="conclusao">
                <h2>10. üéâ Conclus√£o</h2>
                <p>Manipular formul√°rios com JavaScript √© uma habilidade essencial para criar interfaces din√¢micas e
                    interativas. Com as t√©cnicas apresentadas neste guia, voc√™ pode selecionar elementos, recuperar e
                    definir valores, gerenciar eventos, validar dados e usar APIs modernas como FormData para criar
                    experi√™ncias de usu√°rio incr√≠veis.</p>

                <div class="success">
                    <strong>‚úÖ Parab√©ns!</strong>
                    Agora voc√™ est√° pronto para criar formul√°rios robustos e interativos. Continue praticando e
                    explorando novas possibilidades!
                </div>

                <div class="demo-area">
                    <h3>Teste Final</h3>
                    <p>Crie seu pr√≥prio formul√°rio com valida√ß√£o e envie os dados usando FormData. Experimente combinar
                        v√°rias t√©cnicas aprendidas!</p>
                    <button class="demo-button" onclick="alert('Boa sorte na sua jornada com formul√°rios! üöÄ')">Come√ßar
                        Agora</button>
                </div>
            </div>
        </div>

        <script>
            // Fun√ß√µes de suporte
            function validarEmail(email) {
                const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return regex.test(email);
            }

            function exibirErro(mensagem, campo) {
                const erroExistente = campo.parentElement.querySelector('.error-message');
                if (erroExistente) erroExistente.remove();

                const erro = document.createElement('div');
                erro.className = 'error-message';
                erro.style.color = '#e74c3c';
                erro.style.fontSize = '14px';
                erro.style.marginTop = '5px';
                erro.textContent = mensagem;
                campo.parentElement.appendChild(erro);
                campo.classList.add('error');
            }

            function validarFormulario() {
                // Fun√ß√£o gen√©rica de valida√ß√£o
                const form = document.getElementById('meuFormulario');
                let isValid = true;

                const nome = form.elements['nome'].value;
                if (nome.length < 2) {
                    exibirErro('Nome deve ter pelo menos 2 caracteres', form.elements['nome']);
                    isValid = false;
                }

                const email = form.elements['email'].value;
                if (!validarEmail(email)) {
                    exibirErro('Email inv√°lido', form.elements['email']);
                    isValid = false;
                }

                return isValid;
            }

            function enviarDados() {
                // Fun√ß√£o placeholder para envio de dados
                console.log('Dados enviados com sucesso!');
            }

            function carregarBairrosSaoPaulo() {
                // Fun√ß√£o placeholder para carregar dados din√¢micos
                console.log('Carregando bairros de S√£o Paulo...');
            }

            function adicionarCampoDinamico() {
                // Fun√ß√£o placeholder para campos din√¢micos
                console.log('Adicionando campo din√¢mico...');
            }
        </script>
</body>

</html>